openapi: 3.1.0
info:
  title: PantryChef API
  description: A recipe recommendation service that suggests meals based on ingredients
    you have at home
  version: 0.1.0
paths:
  /auth/register:
    post:
      tags:
      - Authentication
      summary: Register a new user
      description: 'Register a new user account.


        Creates a new user with the provided email, username, and password.

        The password is securely hashed before storage.


        - **email**: Valid email address (must be unique)

        - **username**: Unique username (3-100 characters)

        - **password**: Password (minimum 8 characters)'
      operationId: register_auth_register_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCreate'
        required: true
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRead'
        '400':
          description: Email or username already registered
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /auth/login:
    post:
      tags:
      - Authentication
      summary: Login and get access token
      description: 'Authenticate user and return a JWT access token.


        Uses OAuth2 password flow. Send credentials as form data:

        - **username**: Your email address

        - **password**: Your password


        Returns a bearer token to use in the Authorization header for protected endpoints.'
      operationId: login_auth_login_post
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Body_login_auth_login_post'
        required: true
      responses:
        '200':
          description: Login successful, returns JWT token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
        '401':
          description: Invalid credentials
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /auth/me:
    get:
      tags:
      - Authentication
      summary: Get current user profile
      description: 'Get the profile of the currently authenticated user.


        Requires a valid JWT token in the Authorization header:

        `Authorization: Bearer <token>`'
      operationId: get_me_auth_me_get
      responses:
        '200':
          description: Current user profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRead'
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
  /ingredients/:
    get:
      tags:
      - Ingredients
      summary: List all ingredients
      description: 'Get a paginated list of all ingredients.


        Optionally filter by category to narrow down results. Categories include:

        - **produce**: Fresh fruits and vegetables

        - **dairy**: Milk, cheese, yogurt, etc.

        - **protein**: Meat, poultry, fish, tofu, etc.

        - **grains**: Rice, pasta, bread, etc.

        - **spices**: Herbs and seasonings

        - **pantry**: Canned goods, oils, condiments


        Use `skip` and `limit` for pagination.'
      operationId: list_ingredients_ingredients__get
      parameters:
      - name: category
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Filter ingredients by category (e.g., produce, dairy, protein)
          title: Category
        description: Filter ingredients by category (e.g., produce, dairy, protein)
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Number of records to skip
          default: 0
          title: Skip
        description: Number of records to skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 500
          minimum: 1
          description: Maximum records to return
          default: 100
          title: Limit
        description: Maximum records to return
      responses:
        '200':
          description: List of ingredients
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/IngredientRead'
                title: Response List Ingredients Ingredients  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    post:
      tags:
      - Ingredients
      summary: Create a new ingredient
      description: 'Create a new ingredient.


        Adds a new ingredient to the database. The ingredient name must be unique.


        - **name**: Unique ingredient name (1-100 characters)

        - **category**: Category classification (e.g., produce, dairy, protein)


        Note: In a production system, this endpoint would typically be restricted

        to admin users only.'
      operationId: create_new_ingredient_ingredients__post
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IngredientCreate'
      responses:
        '201':
          description: Ingredient created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngredientRead'
        '400':
          description: Ingredient with this name already exists
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /ingredients/categories:
    get:
      tags:
      - Ingredients
      summary: List all ingredient categories
      description: 'Get all unique ingredient categories.


        Returns a sorted list of all category names currently in use.

        Useful for populating filter dropdowns in the UI.'
      operationId: list_categories_ingredients_categories_get
      responses:
        '200':
          description: List of unique category names
          content:
            application/json:
              schema:
                items:
                  type: string
                type: array
                title: Response List Categories Ingredients Categories Get
  /ingredients/{ingredient_id}:
    get:
      tags:
      - Ingredients
      summary: Get ingredient by ID
      description: 'Get a single ingredient by its ID.


        Returns the full details of the specified ingredient.'
      operationId: get_ingredient_ingredients__ingredient_id__get
      parameters:
      - name: ingredient_id
        in: path
        required: true
        schema:
          type: integer
          title: Ingredient Id
      responses:
        '200':
          description: Ingredient details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngredientRead'
        '404':
          description: Ingredient not found
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /pantry/:
    get:
      tags:
      - Pantry
      summary: List user's pantry items
      description: 'Get all items in the current user''s pantry.


        Returns a list of pantry items with ingredient details, ordered by most recently
        added.

        Use `skip` and `limit` for pagination.'
      operationId: list_pantry_items_pantry__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Number of records to skip
          default: 0
          title: Skip
        description: Number of records to skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 500
          minimum: 1
          description: Maximum records to return
          default: 100
          title: Limit
        description: Maximum records to return
      responses:
        '200':
          description: List of pantry items
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PantryItemRead'
                title: Response List Pantry Items Pantry  Get
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    post:
      tags:
      - Pantry
      summary: Add item to pantry
      description: 'Add a new item to your pantry.


        - **ingredient_id**: ID of the ingredient to add

        - **quantity**: Optional quantity (e.g., "2", "500g")

        - **unit**: Optional unit of measurement (e.g., "cups", "pieces")

        - **expiration_date**: Optional expiration date


        Note: Each ingredient can only be added once per user. To update quantity,

        use the PATCH endpoint.'
      operationId: add_pantry_item_pantry__post
      security:
      - OAuth2PasswordBearer: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PantryItemCreate'
      responses:
        '201':
          description: Item added to pantry
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PantryItemRead'
        '400':
          description: Invalid ingredient or already in pantry
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /pantry/expiring:
    get:
      tags:
      - Pantry
      summary: Get expiring pantry items
      description: 'Get pantry items expiring within the specified number of days.


        Useful for planning meals around ingredients that need to be used soon.

        Items are sorted by expiration date (soonest first).'
      operationId: list_expiring_items_pantry_expiring_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: days
        in: query
        required: false
        schema:
          type: integer
          maximum: 90
          minimum: 1
          description: Days to look ahead for expiration
          default: 7
          title: Days
        description: Days to look ahead for expiration
      responses:
        '200':
          description: List of expiring items
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PantryItemRead'
                title: Response List Expiring Items Pantry Expiring Get
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /pantry/{item_id}:
    get:
      tags:
      - Pantry
      summary: Get pantry item by ID
      description: Get a specific pantry item by its ID.
      operationId: get_pantry_item_pantry__item_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: integer
          title: Item Id
      responses:
        '200':
          description: Pantry item details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PantryItemRead'
        '401':
          description: Not authenticated
        '404':
          description: Pantry item not found
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    patch:
      tags:
      - Pantry
      summary: Update pantry item
      description: 'Update a pantry item''s quantity, unit, or expiration date.


        Only provided fields will be updated. Use `null` to clear a field.'
      operationId: update_pantry_item_endpoint_pantry__item_id__patch
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: integer
          title: Item Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PantryItemUpdate'
      responses:
        '200':
          description: Item updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PantryItemRead'
        '401':
          description: Not authenticated
        '404':
          description: Pantry item not found
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - Pantry
      summary: Remove item from pantry
      description: Remove an item from your pantry.
      operationId: remove_pantry_item_pantry__item_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: integer
          title: Item Id
      responses:
        '200':
          description: Item removed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '401':
          description: Not authenticated
        '404':
          description: Pantry item not found
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /pantry/bulk:
    post:
      tags:
      - Pantry
      summary: Add multiple items to pantry
      description: 'Add multiple items to your pantry at once.


        Useful for initial pantry setup or after grocery shopping.

        Items that already exist in the pantry will be skipped.'
      operationId: add_pantry_items_bulk_pantry_bulk_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PantryItemBulkCreate'
        required: true
      responses:
        '201':
          description: Items added to pantry
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/PantryItemRead'
                type: array
                title: Response Add Pantry Items Bulk Pantry Bulk Post
        '400':
          description: Invalid ingredient(s)
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
      - OAuth2PasswordBearer: []
  /recipes/:
    get:
      tags:
      - Recipes
      summary: List all recipes
      description: 'Get a paginated list of all recipes.


        Filter options:

        - **difficulty**: Filter by difficulty level (easy, medium, hard)

        - **max_prep_time**: Maximum prep time in minutes

        - **max_cook_time**: Maximum cook time in minutes


        Use `skip` and `limit` for pagination.'
      operationId: list_recipes_recipes__get
      parameters:
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Number of records to skip
          default: 0
          title: Skip
        description: Number of records to skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          description: Maximum records to return
          default: 20
          title: Limit
        description: Maximum records to return
      - name: difficulty
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            pattern: ^(easy|medium|hard)$
          - type: 'null'
          description: Filter by difficulty level
          title: Difficulty
        description: Filter by difficulty level
      - name: max_prep_time
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
            minimum: 0
          - type: 'null'
          description: Maximum prep time in minutes
          title: Max Prep Time
        description: Maximum prep time in minutes
      - name: max_cook_time
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
            minimum: 0
          - type: 'null'
          description: Maximum cook time in minutes
          title: Max Cook Time
        description: Maximum cook time in minutes
      responses:
        '200':
          description: List of recipes
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RecipeSummary'
                title: Response List Recipes Recipes  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    post:
      tags:
      - Recipes
      summary: Create a new recipe
      description: 'Create a new recipe with ingredients.


        **Recipe fields:**

        - **title**: Recipe name (required)

        - **description**: Brief description

        - **instructions**: Step-by-step cooking instructions (required)

        - **prep_time**: Preparation time in minutes

        - **cook_time**: Cooking time in minutes

        - **difficulty_level**: easy, medium, or hard

        - **servings**: Number of servings

        - **image_url**: URL to recipe image

        - **source_url**: URL to original recipe source


        **Ingredients list:**

        Each ingredient requires:

        - **ingredient_id**: ID of an existing ingredient

        - **quantity**: Amount needed (e.g., "2", "1/2")

        - **unit**: Unit of measurement (e.g., "cups", "tbsp")

        - **optional**: Whether the ingredient is optional (default: false)


        Note: In a production system, this endpoint would typically be restricted

        to admin users only.'
      operationId: create_new_recipe_recipes__post
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecipeCreate'
      responses:
        '201':
          description: Recipe created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeRead'
        '400':
          description: Invalid ingredient(s)
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /recipes/search:
    get:
      tags:
      - Recipes
      summary: Search recipes
      description: 'Search recipes by title or description.


        Performs a case-insensitive partial match on recipe titles and descriptions.'
      operationId: search_recipes_endpoint_recipes_search_get
      parameters:
      - name: q
        in: query
        required: true
        schema:
          type: string
          minLength: 1
          maxLength: 100
          description: Search query
          title: Q
        description: Search query
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Number of records to skip
          default: 0
          title: Skip
        description: Number of records to skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          description: Maximum records to return
          default: 20
          title: Limit
        description: Maximum records to return
      responses:
        '200':
          description: Search results
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RecipeSummary'
                title: Response Search Recipes Endpoint Recipes Search Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /recipes/{recipe_id}:
    get:
      tags:
      - Recipes
      summary: Get recipe details
      description: 'Get full details for a single recipe, including all ingredients.


        Returns:

        - Recipe metadata (title, description, times, difficulty, etc.)

        - Complete ingredient list with quantities and units

        - Step-by-step instructions'
      operationId: get_recipe_recipes__recipe_id__get
      parameters:
      - name: recipe_id
        in: path
        required: true
        schema:
          type: integer
          title: Recipe Id
      responses:
        '200':
          description: Full recipe details with ingredients
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeRead'
        '404':
          description: Recipe not found
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /recommendations/:
    get:
      tags:
      - Recommendations
      summary: Get recipe recommendations
      description: '**Core Feature**: Get personalized recipe recommendations based
        on your pantry.


        This endpoint analyzes your pantry inventory and returns recipes ranked by

        how many required ingredients you already have.


        **How matching works:**

        - Only **required** ingredients (non-optional) are considered for match percentage

        - Recipes are sorted by match percentage (highest first)

        - Each recipe shows which ingredients you have and which you''re missing


        **Filtering options:**

        - **min_match_percent**: Only show recipes where you have at least X% of ingredients

        - **max_missing_ingredients**: Only show recipes missing at most N ingredients

        - **difficulty**: Filter by easy, medium, or hard recipes

        - **max_total_time**: Filter by maximum prep + cook time


        **Dietary filters:**

        - **vegetarian**: Exclude recipes with meat, poultry, or fish

        - **vegan**: Exclude recipes with any animal products

        - **gluten_free**: Exclude recipes with gluten-containing ingredients

        - **exclude_allergens**: Exclude recipes containing specific allergens


        **Smart features:**

        - **prioritize_expiring**: Sort by recipes that use soon-to-expire ingredients
        first


        **Example use cases:**

        - Set `min_match_percent=100` to see recipes you can make right now

        - Set `max_missing_ingredients=2` to see recipes needing just a few more items

        - Use `vegetarian=true&exclude_allergens=nuts` for nut-free vegetarian meals

        - Use `prioritize_expiring=true` to reduce food waste


        **Response includes:**

        - Recipe summary information

        - `match_percentage`: What % of required ingredients you have

        - `matched_ingredients`: Count of matched ingredients

        - `total_required_ingredients`: Total required ingredients in recipe

        - `missing_ingredients`: List of ingredients you need to buy

        - `uses_expiring_ingredients`: Count of expiring items used (when prioritize_expiring=true)'
      operationId: get_recommendations_recommendations__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: min_match_percent
        in: query
        required: false
        schema:
          type: number
          maximum: 100
          minimum: 0
          description: Minimum ingredient match percentage (0-100)
          default: 0.0
          title: Min Match Percent
        description: Minimum ingredient match percentage (0-100)
      - name: max_missing_ingredients
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
            minimum: 0
          - type: 'null'
          description: Maximum number of missing ingredients allowed
          title: Max Missing Ingredients
        description: Maximum number of missing ingredients allowed
      - name: difficulty
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            pattern: ^(easy|medium|hard)$
          - type: 'null'
          description: Filter by difficulty level
          title: Difficulty
        description: Filter by difficulty level
      - name: max_total_time
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
            minimum: 0
          - type: 'null'
          description: Maximum total time (prep + cook) in minutes
          title: Max Total Time
        description: Maximum total time (prep + cook) in minutes
      - name: vegetarian
        in: query
        required: false
        schema:
          type: boolean
          description: Only include vegetarian recipes (no meat, poultry, fish)
          default: false
          title: Vegetarian
        description: Only include vegetarian recipes (no meat, poultry, fish)
      - name: vegan
        in: query
        required: false
        schema:
          type: boolean
          description: Only include vegan recipes (no animal products)
          default: false
          title: Vegan
        description: Only include vegan recipes (no animal products)
      - name: gluten_free
        in: query
        required: false
        schema:
          type: boolean
          description: Only include gluten-free recipes
          default: false
          title: Gluten Free
        description: Only include gluten-free recipes
      - name: exclude_allergens
        in: query
        required: false
        schema:
          type: array
          items:
            type: string
          description: Allergens to exclude (e.g., dairy, nuts, shellfish, eggs, soy,
            wheat)
          default: []
          title: Exclude Allergens
        description: Allergens to exclude (e.g., dairy, nuts, shellfish, eggs, soy,
          wheat)
      - name: prioritize_expiring
        in: query
        required: false
        schema:
          type: boolean
          description: Prioritize recipes using ingredients expiring soon
          default: false
          title: Prioritize Expiring
        description: Prioritize recipes using ingredients expiring soon
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          description: Maximum recipes to return
          default: 20
          title: Limit
        description: Maximum recipes to return
      responses:
        '200':
          description: Recipes ranked by pantry match
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RecipeMatch'
                title: Response Get Recommendations Recommendations  Get
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /recommendations/{recipe_id}/shopping-list:
    get:
      tags:
      - Recommendations
      summary: Get shopping list for a recipe
      description: 'Generate a shopping list for a specific recipe.


        Compares the recipe''s ingredients against your pantry and returns

        a list of items you need to buy.


        **Includes:**

        - All missing ingredients (both required and optional)

        - Quantities and units needed

        - Total count of missing items


        Use this to plan your grocery shopping for a specific recipe.'
      operationId: get_recipe_shopping_list_recommendations__recipe_id__shopping_list_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: recipe_id
        in: path
        required: true
        schema:
          type: integer
          title: Recipe Id
      responses:
        '200':
          description: Shopping list with missing ingredients
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShoppingList'
        '401':
          description: Not authenticated
        '404':
          description: Recipe not found
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /favorites/:
    get:
      tags:
      - Favorites
      summary: List favorite recipes
      description: 'Get all recipes saved to your favorites.


        Returns favorites sorted by most recently added, with recipe summary details.

        Use `skip` and `limit` for pagination.'
      operationId: list_favorites_favorites__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Number of records to skip
          default: 0
          title: Skip
        description: Number of records to skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 200
          minimum: 1
          description: Maximum records to return
          default: 50
          title: Limit
        description: Maximum records to return
      responses:
        '200':
          description: List of favorite recipes
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FavoriteRead'
                title: Response List Favorites Favorites  Get
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /favorites/{recipe_id}:
    post:
      tags:
      - Favorites
      summary: Add recipe to favorites
      description: 'Add a recipe to your favorites.


        Each recipe can only be favorited once per user.'
      operationId: add_to_favorites_favorites__recipe_id__post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: recipe_id
        in: path
        required: true
        schema:
          type: integer
          title: Recipe Id
      responses:
        '201':
          description: Recipe added to favorites
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FavoriteRead'
        '400':
          description: Recipe already in favorites or not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - Favorites
      summary: Remove recipe from favorites
      description: Remove a recipe from your favorites.
      operationId: remove_from_favorites_favorites__recipe_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: recipe_id
        in: path
        required: true
        schema:
          type: integer
          title: Recipe Id
      responses:
        '200':
          description: Recipe removed from favorites
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '401':
          description: Not authenticated
        '404':
          description: Recipe not in favorites
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /history/:
    get:
      tags:
      - Cooking History
      summary: List cooking history
      description: 'Get your cooking history.


        Returns a log of all recipes you''ve cooked, sorted by most recent first.

        Each entry includes the recipe details, when you cooked it, your rating, and
        notes.


        Use `skip` and `limit` for pagination.'
      operationId: list_cooking_history_history__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Number of records to skip
          default: 0
          title: Skip
        description: Number of records to skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 200
          minimum: 1
          description: Maximum records to return
          default: 50
          title: Limit
        description: Maximum records to return
      responses:
        '200':
          description: Cooking history entries
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CookingHistoryRead'
                title: Response List Cooking History History  Get
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    post:
      tags:
      - Cooking History
      summary: Log a cooked recipe
      description: 'Log that you''ve cooked a recipe.


        Track your cooking journey by logging recipes when you make them.

        You can log the same recipe multiple times.


        - **recipe_id**: ID of the recipe you cooked (required)

        - **rating**: Your rating from 1-5 stars (optional)

        - **notes**: Personal notes about this cooking session (optional)


        **Tips for notes:**

        - What modifications did you make?

        - How did it turn out?

        - What would you do differently next time?'
      operationId: log_recipe_history__post
      security:
      - OAuth2PasswordBearer: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CookingHistoryCreate'
      responses:
        '201':
          description: Recipe logged successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CookingHistoryRead'
        '400':
          description: Recipe not found
        '401':
          description: Not authenticated
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /history/stats:
    get:
      tags:
      - Cooking History
      summary: Get cooking statistics
      description: 'Get your cooking statistics.


        **Statistics include:**

        - **total_recipes_cooked**: Total number of times you''ve cooked (including
        repeats)

        - **unique_recipes_cooked**: Number of different recipes you''ve tried

        - **average_rating**: Your average rating across all rated meals

        - **most_cooked_recipe**: The recipe you''ve made most often

        - **most_cooked_count**: How many times you''ve made your most cooked recipe'
      operationId: get_stats_history_stats_get
      responses:
        '200':
          description: Cooking statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CookingStats'
        '401':
          description: Not authenticated
      security:
      - OAuth2PasswordBearer: []
  /:
    get:
      tags:
      - Health
      summary: Root
      description: Root endpoint returning API info.
      operationId: root__get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
                title: Response Root  Get
  /health:
    get:
      tags:
      - Health
      summary: Health Check
      description: Health check endpoint.
      operationId: health_check_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
                title: Response Health Check Health Get
components:
  schemas:
    Body_login_auth_login_post:
      properties:
        grant_type:
          anyOf:
          - type: string
            pattern: ^password$
          - type: 'null'
          title: Grant Type
        username:
          type: string
          title: Username
        password:
          type: string
          format: password
          title: Password
        scope:
          type: string
          title: Scope
          default: ''
        client_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Client Id
        client_secret:
          anyOf:
          - type: string
          - type: 'null'
          format: password
          title: Client Secret
      type: object
      required:
      - username
      - password
      title: Body_login_auth_login_post
    CookingHistoryCreate:
      properties:
        recipe_id:
          type: integer
          title: Recipe Id
        rating:
          anyOf:
          - type: integer
            maximum: 5.0
            minimum: 1.0
          - type: 'null'
          title: Rating
          description: Rating from 1 to 5 stars
        notes:
          anyOf:
          - type: string
          - type: 'null'
          title: Notes
      type: object
      required:
      - recipe_id
      title: CookingHistoryCreate
      description: Schema for logging a cooked recipe.
    CookingHistoryRead:
      properties:
        id:
          type: integer
          title: Id
        user_id:
          type: integer
          title: User Id
        recipe_id:
          type: integer
          title: Recipe Id
        cooked_at:
          type: string
          format: date-time
          title: Cooked At
        rating:
          anyOf:
          - type: integer
          - type: 'null'
          title: Rating
        notes:
          anyOf:
          - type: string
          - type: 'null'
          title: Notes
        recipe:
          $ref: '#/components/schemas/RecipeSummary'
      type: object
      required:
      - id
      - user_id
      - recipe_id
      - cooked_at
      - rating
      - notes
      - recipe
      title: CookingHistoryRead
      description: Schema for reading cooking history data (response).
    CookingStats:
      properties:
        total_recipes_cooked:
          type: integer
          title: Total Recipes Cooked
        unique_recipes_cooked:
          type: integer
          title: Unique Recipes Cooked
        average_rating:
          anyOf:
          - type: number
          - type: 'null'
          title: Average Rating
        most_cooked_recipe:
          anyOf:
          - $ref: '#/components/schemas/RecipeSummary'
          - type: 'null'
        most_cooked_count:
          anyOf:
          - type: integer
          - type: 'null'
          title: Most Cooked Count
      type: object
      required:
      - total_recipes_cooked
      - unique_recipes_cooked
      - average_rating
      - most_cooked_recipe
      - most_cooked_count
      title: CookingStats
      description: Schema for cooking statistics.
    FavoriteRead:
      properties:
        id:
          type: integer
          title: Id
        user_id:
          type: integer
          title: User Id
        recipe_id:
          type: integer
          title: Recipe Id
        created_at:
          type: string
          format: date-time
          title: Created At
        recipe:
          $ref: '#/components/schemas/RecipeSummary'
      type: object
      required:
      - id
      - user_id
      - recipe_id
      - created_at
      - recipe
      title: FavoriteRead
      description: Schema for reading favorite data (response).
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    IngredientCreate:
      properties:
        name:
          type: string
          maxLength: 100
          minLength: 1
          title: Name
        category:
          type: string
          maxLength: 50
          minLength: 1
          title: Category
          description: Category of ingredient (e.g., produce, dairy, protein, grains,
            spices)
        is_vegetarian:
          type: boolean
          title: Is Vegetarian
          description: Whether ingredient is suitable for vegetarians (False for meat/fish)
          default: true
        is_vegan:
          type: boolean
          title: Is Vegan
          description: Whether ingredient is suitable for vegans (False for all animal
            products)
          default: true
        is_gluten_free:
          type: boolean
          title: Is Gluten Free
          description: Whether ingredient is gluten-free (False for wheat/barley/rye)
          default: true
        allergens:
          anyOf:
          - type: string
            maxLength: 200
          - type: 'null'
          title: Allergens
          description: Comma-separated allergen tags (e.g., 'dairy,soy', 'nuts,peanuts')
      type: object
      required:
      - name
      - category
      title: IngredientCreate
      description: Schema for creating a new ingredient.
    IngredientRead:
      properties:
        name:
          type: string
          maxLength: 100
          minLength: 1
          title: Name
        category:
          type: string
          maxLength: 50
          minLength: 1
          title: Category
          description: Category of ingredient (e.g., produce, dairy, protein, grains,
            spices)
        id:
          type: integer
          title: Id
        is_vegetarian:
          type: boolean
          title: Is Vegetarian
        is_vegan:
          type: boolean
          title: Is Vegan
        is_gluten_free:
          type: boolean
          title: Is Gluten Free
        allergens:
          anyOf:
          - type: string
          - type: 'null'
          title: Allergens
      type: object
      required:
      - name
      - category
      - id
      - is_vegetarian
      - is_vegan
      - is_gluten_free
      - allergens
      title: IngredientRead
      description: Schema for reading ingredient data (response).
    Message:
      properties:
        message:
          type: string
          title: Message
      type: object
      required:
      - message
      title: Message
      description: Simple message response.
    PantryItemBulkCreate:
      properties:
        items:
          items:
            $ref: '#/components/schemas/PantryItemCreate'
          type: array
          minItems: 1
          title: Items
          description: List of pantry items to add
      type: object
      required:
      - items
      title: PantryItemBulkCreate
      description: Schema for adding multiple items to the pantry at once.
    PantryItemCreate:
      properties:
        ingredient_id:
          type: integer
          title: Ingredient Id
        quantity:
          anyOf:
          - type: string
            maxLength: 50
          - type: 'null'
          title: Quantity
        unit:
          anyOf:
          - type: string
            maxLength: 30
          - type: 'null'
          title: Unit
        expiration_date:
          anyOf:
          - type: string
            format: date
          - type: 'null'
          title: Expiration Date
      type: object
      required:
      - ingredient_id
      title: PantryItemCreate
      description: Schema for adding an item to the pantry.
    PantryItemRead:
      properties:
        id:
          type: integer
          title: Id
        user_id:
          type: integer
          title: User Id
        quantity:
          anyOf:
          - type: string
          - type: 'null'
          title: Quantity
        unit:
          anyOf:
          - type: string
          - type: 'null'
          title: Unit
        expiration_date:
          anyOf:
          - type: string
            format: date
          - type: 'null'
          title: Expiration Date
        created_at:
          type: string
          format: date-time
          title: Created At
        updated_at:
          type: string
          format: date-time
          title: Updated At
        ingredient:
          $ref: '#/components/schemas/IngredientRead'
      type: object
      required:
      - id
      - user_id
      - quantity
      - unit
      - expiration_date
      - created_at
      - updated_at
      - ingredient
      title: PantryItemRead
      description: Schema for reading pantry item data (response).
    PantryItemUpdate:
      properties:
        quantity:
          anyOf:
          - type: string
            maxLength: 50
          - type: 'null'
          title: Quantity
        unit:
          anyOf:
          - type: string
            maxLength: 30
          - type: 'null'
          title: Unit
        expiration_date:
          anyOf:
          - type: string
            format: date
          - type: 'null'
          title: Expiration Date
      type: object
      title: PantryItemUpdate
      description: Schema for updating a pantry item.
    RecipeCreate:
      properties:
        title:
          type: string
          maxLength: 200
          minLength: 1
          title: Title
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        instructions:
          type: string
          minLength: 1
          title: Instructions
        prep_time:
          anyOf:
          - type: integer
            minimum: 0.0
          - type: 'null'
          title: Prep Time
          description: Prep time in minutes
        cook_time:
          anyOf:
          - type: integer
            minimum: 0.0
          - type: 'null'
          title: Cook Time
          description: Cook time in minutes
        difficulty_level:
          anyOf:
          - type: string
            pattern: ^(easy|medium|hard)$
          - type: 'null'
          title: Difficulty Level
          description: 'Difficulty level: easy, medium, or hard'
        servings:
          anyOf:
          - type: integer
            minimum: 1.0
          - type: 'null'
          title: Servings
        image_url:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Image Url
        source_url:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Source Url
        ingredients:
          items:
            $ref: '#/components/schemas/RecipeIngredientCreate'
          type: array
          minItems: 1
          title: Ingredients
          description: List of ingredients required for the recipe
      type: object
      required:
      - title
      - instructions
      - ingredients
      title: RecipeCreate
      description: Schema for creating a new recipe.
    RecipeIngredientCreate:
      properties:
        ingredient_id:
          type: integer
          title: Ingredient Id
        quantity:
          anyOf:
          - type: string
            maxLength: 50
          - type: 'null'
          title: Quantity
        unit:
          anyOf:
          - type: string
            maxLength: 30
          - type: 'null'
          title: Unit
        optional:
          type: boolean
          title: Optional
          default: false
      type: object
      required:
      - ingredient_id
      title: RecipeIngredientCreate
      description: Schema for creating a recipe ingredient association.
    RecipeIngredientRead:
      properties:
        id:
          type: integer
          title: Id
        quantity:
          anyOf:
          - type: string
          - type: 'null'
          title: Quantity
        unit:
          anyOf:
          - type: string
          - type: 'null'
          title: Unit
        optional:
          type: boolean
          title: Optional
        ingredient:
          $ref: '#/components/schemas/IngredientRead'
      type: object
      required:
      - id
      - quantity
      - unit
      - optional
      - ingredient
      title: RecipeIngredientRead
      description: Schema for reading recipe ingredient data with ingredient details.
    RecipeMatch:
      properties:
        id:
          type: integer
          title: Id
        title:
          type: string
          title: Title
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        prep_time:
          anyOf:
          - type: integer
          - type: 'null'
          title: Prep Time
        cook_time:
          anyOf:
          - type: integer
          - type: 'null'
          title: Cook Time
        difficulty_level:
          anyOf:
          - type: string
          - type: 'null'
          title: Difficulty Level
        servings:
          anyOf:
          - type: integer
          - type: 'null'
          title: Servings
        image_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Image Url
        match_percentage:
          type: number
          maximum: 100.0
          minimum: 0.0
          title: Match Percentage
          description: Percentage of required ingredients user has
        matched_ingredients:
          type: integer
          minimum: 0.0
          title: Matched Ingredients
          description: Number of matched ingredients
        total_required_ingredients:
          type: integer
          minimum: 0.0
          title: Total Required Ingredients
          description: Total required (non-optional) ingredients
        missing_ingredients:
          items:
            $ref: '#/components/schemas/IngredientRead'
          type: array
          title: Missing Ingredients
          description: List of ingredients user is missing
        uses_expiring_ingredients:
          anyOf:
          - type: integer
            minimum: 0.0
          - type: 'null'
          title: Uses Expiring Ingredients
          description: Number of soon-to-expire ingredients used (when prioritize_expiring=true)
      type: object
      required:
      - id
      - title
      - description
      - prep_time
      - cook_time
      - difficulty_level
      - servings
      - image_url
      - match_percentage
      - matched_ingredients
      - total_required_ingredients
      title: RecipeMatch
      description: Recipe with match percentage based on pantry ingredients.
    RecipeRead:
      properties:
        title:
          type: string
          maxLength: 200
          minLength: 1
          title: Title
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        instructions:
          type: string
          minLength: 1
          title: Instructions
        prep_time:
          anyOf:
          - type: integer
            minimum: 0.0
          - type: 'null'
          title: Prep Time
          description: Prep time in minutes
        cook_time:
          anyOf:
          - type: integer
            minimum: 0.0
          - type: 'null'
          title: Cook Time
          description: Cook time in minutes
        difficulty_level:
          anyOf:
          - type: string
            pattern: ^(easy|medium|hard)$
          - type: 'null'
          title: Difficulty Level
          description: 'Difficulty level: easy, medium, or hard'
        servings:
          anyOf:
          - type: integer
            minimum: 1.0
          - type: 'null'
          title: Servings
        image_url:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Image Url
        source_url:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Source Url
        id:
          type: integer
          title: Id
        created_at:
          type: string
          format: date-time
          title: Created At
        recipe_ingredients:
          items:
            $ref: '#/components/schemas/RecipeIngredientRead'
          type: array
          title: Recipe Ingredients
          description: List of ingredients with quantities
      type: object
      required:
      - title
      - instructions
      - id
      - created_at
      title: RecipeRead
      description: Schema for reading recipe data with full details (response).
    RecipeSummary:
      properties:
        id:
          type: integer
          title: Id
        title:
          type: string
          title: Title
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        prep_time:
          anyOf:
          - type: integer
          - type: 'null'
          title: Prep Time
        cook_time:
          anyOf:
          - type: integer
          - type: 'null'
          title: Cook Time
        difficulty_level:
          anyOf:
          - type: string
          - type: 'null'
          title: Difficulty Level
        servings:
          anyOf:
          - type: integer
          - type: 'null'
          title: Servings
        image_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Image Url
      type: object
      required:
      - id
      - title
      - description
      - prep_time
      - cook_time
      - difficulty_level
      - servings
      - image_url
      title: RecipeSummary
      description: Schema for recipe summary (list views, search results).
    ShoppingList:
      properties:
        recipe_id:
          type: integer
          title: Recipe Id
        recipe_title:
          type: string
          title: Recipe Title
        missing_items:
          items:
            $ref: '#/components/schemas/ShoppingListItem'
          type: array
          title: Missing Items
        total_missing:
          type: integer
          title: Total Missing
      type: object
      required:
      - recipe_id
      - recipe_title
      - missing_items
      - total_missing
      title: ShoppingList
      description: Shopping list for a recipe based on user's pantry.
    ShoppingListItem:
      properties:
        ingredient:
          $ref: '#/components/schemas/IngredientRead'
        quantity:
          anyOf:
          - type: string
          - type: 'null'
          title: Quantity
        unit:
          anyOf:
          - type: string
          - type: 'null'
          title: Unit
      type: object
      required:
      - ingredient
      - quantity
      - unit
      title: ShoppingListItem
      description: An item needed for a recipe that's not in the user's pantry.
    Token:
      properties:
        access_token:
          type: string
          title: Access Token
        token_type:
          type: string
          title: Token Type
          default: bearer
      type: object
      required:
      - access_token
      title: Token
      description: JWT access token response.
    UserCreate:
      properties:
        email:
          type: string
          format: email
          title: Email
        username:
          type: string
          maxLength: 100
          minLength: 3
          title: Username
        password:
          type: string
          maxLength: 100
          minLength: 8
          title: Password
      type: object
      required:
      - email
      - username
      - password
      title: UserCreate
      description: Schema for creating a new user (registration).
    UserRead:
      properties:
        email:
          type: string
          format: email
          title: Email
        username:
          type: string
          maxLength: 100
          minLength: 3
          title: Username
        id:
          type: integer
          title: Id
        created_at:
          type: string
          format: date-time
          title: Created At
      type: object
      required:
      - email
      - username
      - id
      - created_at
      title: UserRead
      description: Schema for reading user data (response).
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
  securitySchemes:
    OAuth2PasswordBearer:
      type: oauth2
      flows:
        password:
          scopes: {}
          tokenUrl: /auth/login
